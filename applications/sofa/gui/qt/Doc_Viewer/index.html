<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
  <title></title>
  <meta http-equiv="content-type" content="text/html; charset=windows-1252">
  <meta name="CREATED" content="20070601;16074300">
  <meta name="CHANGEDBY" content="EVASION INRIA">
  <meta name="CHANGED" content="20070619;11234335">
</head>

<body lang="en-US" dir="ltr">
<p align="left" style="MARGIN-BOTTOM: 0cm"><font size="4"><b>The Graphic User
Interface in SOFA</b></font></p>

<p style="MARGIN-TOP: 0.43cm"><font face="Albany, sans-serif"><font
size="4"><a href="#Overview">I) An overview of the GUI</a><br>
<a href="#Structure">II) Structure</a><br>
<a href="#Viewers">III) Viewers</a><br>
<a href="#QtOgreViewer">IV) QtOgreViewer</a><br>
</font></font> <br>
<br>
</p>
<hr>

<p><br>
<br>
</p>
<ol type="I">
  <li><p style="MARGIN-TOP: 0.43cm"><font face="Albany, sans-serif"><font
    size="4"><a name="Overview">An Overview of the GUI</a><br>
    <font face="Albany, sans-serif"><font size="4"><br>
    </font></font><font face="Times New Roman, serif"><font size="3">The main
    program is divided in two main parts, a rendering window and a control
    panel. A slider between them sets their
    dimension.</font></font></font></font></p>
  </li>
</ol>
<ol type="I">
  <p style="MARGIN-BOTTOM: 0cm"><img src="index_fichiers/GUI_caption0.png"
  name="graphics3" align="left" border="0" />
   <br clear="left">
  <font face="Nimbus Roman No9 L, serif"><br>
  </font></p>

  <p>Common Interactions:</p>
  <ol>
    <li value="1"><p style="MARGIN-BOTTOM: 0cm"><font
      face="Nimbus Roman No9 L, serif"><b>ANIM</b>: launch the Simulation.
      The text field, <b>DT</b>sets the step of time used during the
      simulation.</font></p>
    </li>
    <li><p style="MARGIN-BOTTOM: 0cm"><font
      face="Nimbus Roman No9 L, serif"><b>STEP</b>: the simulation will
      compute its state at the time: t+DT.</font></p>
    </li>
    <li><p style="MARGIN-BOTTOM: 0cm"><font
      face="Nimbus Roman No9 L, serif"><b>Reset Scene</b>: reset the
      Simulation to the initial time, t=0.</font></p>
    </li>
    <li><p style="MARGIN-BOTTOM: 0cm"><font
      face="Nimbus Roman No9 L, serif"><b>Reset View</b>: set your camera at
      initial configuration found in a view file, or default
      configuration.</font></p>
    </li>
    <li><p style="MARGIN-BOTTOM: 0cm"><font
      face="Nimbus Roman No9 L, serif"><b>Save View:</b> keep in memory the
      position and orientation of the camera, for the next time you will load
      the scene.</font></p>
    </li>
    <li><p style="MARGIN-BOTTOM: 0cm"><font
      face="Nimbus Roman No9 L, serif"><b>Save Screenshot</b>: take a picture
      of the current scene.</font></p>
    </li>
    <li><p style="MARGIN-BOTTOM: 0cm"><font
      face="Nimbus Roman No9 L, serif">Direct interaction with the scene is
      possible. To do so, maintain SHIFT button pressed and click on a
      collision model present in the scene; A “Pick Interactor” will be
      created, and attached to the picked collision model, if any, with a
      spring. </font></p>
      <p style="MARGIN-BOTTOM: 0cm"><font face="Nimbus Roman No9 L, serif">If
      you release the mouse button first, the spring is removed.</font></p>
      <p style="MARGIN-BOTTOM: 0cm"><font face="Nimbus Roman No9 L, serif">If
      you release the SHIFT button first, the spring is fixed and exists
      until you pick another point in the scene.</font></p>
    </li>
    <li><p style="MARGIN-BOTTOM: 0cm"><font
      face="Nimbus Roman No9 L, serif">Several tabs give more information
      about the current scene: <br>
      This images were taken for the scene shown above.</font></p>
      <p style="MARGIN-BOTTOM: 0cm"><img src="index_fichiers/Tab_show.png"
      name="graphics6" align="left" border="0" />
       <img src="index_fichiers/Tab_stats.png" name="graphics00" align="left"
      border="0" />
       <img src="index_fichiers/Tab_graph.png" name="graphics7" align="left"
      border="0" />
       <font face="Nimbus Roman No9 L, serif"><font
      face="Nimbus Roman No9 L, serif"><br>
      </font><font face="Nimbus Roman No9 L, serif"><br>
      <br>
      <br>
      <br>
      <br>
      </font></font> <br>
      </p>
      <p style="MARGIN-BOTTOM: 0cm"><font
      face="Nimbus Roman No9 L, serif"><br>
      <br>
      <br>
      - depending on the viewer, you can control what is displayed, and the
      way it is. <br>
      - statistical outputs during the simulation (position and velocity for
      each elements, time passed at each branch of the graph, gnuplot files)
      <br>
      - the graph of the scene, with all the nodes. You can export this graph
      into a nice png file.<br>
      - the last tab, “</font><font
      face="Nimbus Roman No9 L, serif"><b>Viewer</b></font>” <font
      face="Nimbus Roman No9 L, serif">gives the name and information about
      the possibilities of the current viewer, and the shortcuts.</font><br>
      <br>
      Double clicking on a node allows you to modify several values and
      change dynamically the simulation (here, the TetrahedronFEMForceField
      node). In some cases, you need to press the <code>update</code> button
      to apply the changes.</p>
      <p><img src="index_fichiers/GUI_caption1.png" name="graphics5"
      align="left" border="0" />
       <br clear="left">
      </p>
    </li>
  </ol>
</ol>
<ol type="I" start="2">
  <li><p style="MARGIN-TOP: 0.43cm"><font face="Albany, sans-serif"><font
    size="4"><a name="Structure">Structure</a> <br>
    </font><font face="Times New Roman" size="3">The main interface uses a Qt
    environment (Qt3.3 for Linux and Qt4 for Windows). The Main window,
    providing all the interactions possible with the simulation,was created
    using QtDesigner. The RealGUI contains the viewer which can be selected
    directly in the main window. The possible choices depends on the
    configuration file, <code>sofa-default.cfg</code>.</font></font></p>
    <ol type="I">
      <p style="MARGIN-BOTTOM: 0cm"><img src="index_fichiers/GUI.png"
      align="left" border="0" name="graphics1" />
       <br clear="left">
      The RealGUI gets a pointer to the root of the scene graph, and controls
      the application by calling class
      <code>sofa::simulation::tree:Simulation</code>.</p>
      <p style="MARGIN-BOTTOM: 0cm"><font face="Times New Roman, serif"><font
      size="3">The RealGUI uses an internal timer to repeatedly call
      method</font></font> <code><font face="Courier New, monospace"><font
      size="3">sofa::simulation::tree:Simulation::animate(GNode* root, double
      dt)</font></font></code> <font face="Times New Roman, serif"><font
      size="3">and then update the viewer.</font></font></p>
      <p style="MARGIN-BOTTOM: 0cm"><font face="Albany, sans-serif"><font
      size="4"><br>
      <font face="Times New Roman, serif"><font size="3">To select the
      viewers:</font></font></font></font></p>
    </ol>
    <ol type="I" start="2">
      <p><font face="Nimbus Roman No9 L, serif">sofa-default.cfg located in
      your Sofa main directory allows to define what kind of viewer you are
      willing to have. <br>
      By commenting (adding a“#” in front of the line) or uncommenting
      (removing the “#”) lines, you can allow multiple kind of viewer.<br>
      For example, if you want to have the choice to render the scene with
      QtGLViewer and QtOgreViewer, just modify sofa-default.cfg as below:<br>
      <br>
      <font face="Courier New, monospace"># DEFINES += SOFA_GUI_QT <br>
      DEFINES += SOFA_GUI_QTOGREVIEWER<br>
      DEFINES += SOFA_GUI_QGLVIEWER</font><font face="Courier, monospace"><br>
      <br>
      </font>Then, in the main window, you select the kind of viewer you
      want. Qt will appear in gray, whereas QGLViewer and Ogre will be
      available.<br>
      Warning, you must reload the scene when this change is made!</font></p>
      <font face="Arial" size="4"><br>
      </font></ol>
  </li>
  <li><p style="MARGIN-TOP: 0.43cm"><font face="Albany, sans-serif"><font
    size="4"><a name="Viewers">Viewers</a></font></font></p>
  </li>
</ol>
<ol type="I">
  <p style="MARGIN-BOTTOM: 0cm"><img src="index_fichiers/Viewer.png"
  name="graphics2" align="left" border="0" />
   <br clear="left">
  <font face="Nimbus Roman No9 L, serif"><br>
  The Viewers available now are:</font></p>
  <ol>
    <li><p style="MARGIN-BOTTOM: 0cm"><font
      face="Nimbus Roman No9 L, serif">QtViewer: uses openGL, derives a
      QGLWidget in order to be embedded within Qt. This class will probably
      not be maintained. Use QtGLViewer instead.</font></p>
    </li>
    <li><p style="MARGIN-BOTTOM: 0cm"><font
      face="Nimbus Roman No9 L, serif">QtGLViewer: uses the library
      QGLViewer. Provides lots of functions to navigate through the scene.<br>
      More information at <a
      href="http://artis.imag.fr/%7EGilles.Debunne/QGLViewer/download.html">QGLViewer
      Website.</a></font></p>
    </li>
    <li><p style="MARGIN-BOTTOM: 0cm"><font
      face="Nimbus Roman No9 L, serif">QtOgreViewer: Embed Ogre within a
      Qwidget. Allows to get great visuals, through an intensive use of
      shaders, materials.<br>
      Shadows are provided, but all the controls (show the mechanical
      objects, force fields...) are disabled. <br>
      Warning: Ogre is not provided by Sofa, you have to previously install
      Ogre on your computer. <br>
      The support works with Windows, Linux. <br>
      - For Windows, the easiest way to proceed is to download and install
      the SDK. <br>
      - For Linux, you have to compile from the source. If Ogre's library
      aren't installed in the default directory “</font><font
      face="Nimbus Roman No9 L, serif"><b>/usr/local/lib/Ogre</b></font>”
      <font face="Nimbus Roman No9 L, serif">then, you have to set the
      correct path in “</font><font
      face="Nimbus Roman No9 L, serif"><b>YourSofaDirectory/share/config/plugins_unix.cfg</b></font>”<font
      face="Nimbus Roman No9 L, serif"><br>
      To get it: <a
      href="http://www.ogre3d.org/index.php?option=com_content&amp;task=view&amp;id=406&amp;Itemid=103">Ogre
      Website</a></font></p>
    </li>
  </ol>
</ol>
<ol type="I" start="4">
  <li><p style="MARGIN-TOP: 0.43cm"><a name="QtOgreViewer"></a> <font
    face="Albany, sans-serif"><font size="4">QtOgreViewer</font></font></p>
    <p style="MARGIN-BOTTOM: 0cm"><font face="Nimbus Roman No9 L, serif">To
    use this viewer, you must have Ogre installed on your computer. <br>
    The configuration files are located in: “</font><font
    face="Nimbus Roman No9 L, serif"><b>YourSofaDirectory/share/config/</b></font>”<font
    face="Nimbus Roman No9 L, serif">. </font>“<font
    face="Nimbus Roman No9 L, serif"><b>plugins.cfg</b></font>” <font
    face="Nimbus Roman No9 L, serif">describes the plugins used by Ogre for
    Windows, and “</font><font
    face="Nimbus Roman No9 L, serif"><b>plugins_unix.cfg</b></font>” <font
    face="Nimbus Roman No9 L, serif">for... Linux.<br>
    By creating a .scene file with the same name as the simulation, you can
    provide additional models, lights, visuals to the simulation( see Ogre
    documentation for mode details ). This won't interact with Sofa, but
    allows you to get a better render.</font></p>
    <p style="MARGIN-BOTTOM: 0cm"><font
    face="Nimbus Roman No9 L, serif">Additional textures, materials,
    shaders... in Ogre, have to be put in “
    <b>YourSofaDirectory/share/textures</b>” or “
    <b>YourSofaDirectory/share/materials</b>” or
    “<b>YourSofaDirectory/share/shaders</b>” ... They are loaded at the
    start-up of the viewer.</font></p>
    <p style="MARGIN-TOP: 0.43cm"><img src="index_fichiers/VIewerOGRE.png"
    name="graphics4" align="left" border="0" />
     <br clear="left">
    <font face="Nimbus Roman No9 L, serif"><font size="4"><br>
    </font></font> <br>
    <br>
    </p>
  </li>
</ol>

<p style="MARGIN-BOTTOM: 0cm"><br>
</p>

<p style="MARGIN-BOTTOM: 0cm"><br>
</p>

<p style="MARGIN-BOTTOM: 0cm"><br>
</p>

<p style="MARGIN-BOTTOM: 0cm"><br>
</p>

<p style="MARGIN-BOTTOM: 0cm"><br>
</p>

<p style="MARGIN-BOTTOM: 0cm"><br>
</p>

<p style="MARGIN-BOTTOM: 0cm"><br>
</p>

<p style="MARGIN-BOTTOM: 0cm"><br>
</p>
</body>
</html>
